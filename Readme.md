# Readme

You can find more about the Pip protokernel at its [website](http://pip.univ-lille1.fr/).

The source code is covered by CeCILL-A licence.

The Pip Development Team:

*   Quentin Bergougnoux <quentin.bergougnoux@univ-lille.fr>
*   Julien Cartigny <julien.iguchi-cartigny@univ-lille.fr>
*   Gilles Grimaud <gilles.grimaud@univ-lille.fr>
*   Michaël Hauspie <michael.hauspie@univ-lille.fr>
*   Étienne Helluy Lafont <e.helluy-lafont@etudiant.univ-lille.fr>
*   Samuel Hym <samuel.hym@univ-lille.fr>
*   Narjes Jomaa <narjes.jomaa@univ-lille.fr>
*   David Nowak <david.nowak@univ-lille.fr>
*   Paolo Torrini <paolo.torrini@univ-lille.fr>
*   Mahieddine Yaker <mahieddine.yaker@univ-lille.fr>
*   Nicolas Dejon <nicolas.dejon@orange.com>

**Warning**: Pip-MPU is a project implementing Pip on ARM Cortex-M devices having a Memory Protection Unit (MPU).
It is forked from the Pip original code base.
However, as Pip is originally based on the Memory Management Unit (MMU), Pip-MPU is completely revised while retaining Pip's philosophy and methodology.
The rest of this document is linked to the original Pip and therefore **deprecated**.

## Getting started

You can generate the "Getting Started" tutorial by invoking `make gettingstarted`. The full documentation is generated by invoking `make doc`.

## Dependencies

Pip is known to build correctly with this toolchain:

* COQ Proof Assistant version 8.13.1
* Doxygen version 1.8.13 and above (for documentation generation)
* GCC version 8.3.1 and above
* GNU Make version 4.3 and above
* haskell-stack version 1.7.1 and above (is a cross-platform program for developing Haskell projects)
* Texlive any version or another latex tools

## Building the Pip

You can pass several arguments to make to compile the Pip.

* `all`: Build target
* `proofs`: Proofs target
* `doc` | `doc-c` | `doc-coq` | `gettingstarted`: Documentation targets
* `clean` | `realclean`: Clean targets

## Kernel structure

The kernel is divided into three parts.

* MAL: The Memory Abstraction Layer is used to provide small functions to manipulate the MPU
* Core: The logic of Pip
* Boot: The bootstrap code that initializes required hardware and then boots Pip

## Source code structure

* `_CoqProject` is a mandatory configuration file for Coq.
* `src` contains the source base directory.
* `src/core` contains the Pip source folder.
* `src/extraction` contains the code to extract Coq services.
* `src/interface` contains the interface between Coq and C.
* `src/model` contains the Coq code.
* `src/arch/{architecture}/MAL` contains the Memory Abstraction Layer source.
* `src/arch/{architecture}/boot` contains the "cbits", i.e the required C and assembly code required to boot the coq kernel.
* `tools` contains the digger tool.
* `proof` contains the Coq proof.

## Compiling on Linux

The compilation on Linux should be as easy as to install the GNU Arm Embedded Toolchain as well as the other requirements, and use the Makefile to generate a binary image.
